export const runtime = 'edge';
export default function Page(){return (<html lang=\"zh-CN\"><head><title>HongShi‑DoH — UI</title><link rel=\"icon\" href=\"/favicon.png\"/></head><body style={{margin:0,fontFamily:'ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial',minHeight:'100%',background:'linear-gradient(135deg,#ff8a00,#ff5e62)'}}><div style={{display:'grid',placeItems:'center',minHeight:'100vh',padding:'28px 16px'}}><div style={{width:'980px',maxWidth:'94vw',background:'rgba(255,255,255,.9)',backdropFilter:'blur(10px)',border:'1px solid rgba(255,255,255,.35)',borderRadius:18,boxShadow:'0 24px 80px rgba(255,94,98,.25)',padding:22}}><div style={{display:'flex',alignItems:'center',gap:14,marginBottom:10}}><img src='/favicon.png' width='48' height='48' style={{borderRadius:14,border:'1px solid rgba(255,255,255,.35)'}} alt='avatar'/><div style={{fontSize:28,fontWeight:800}}>DNS‑over‑HTTPS Resolver</div></div><div style={{color:'#555',marginBottom:14}}>选择 DoH 端点并查询任意域名的解析结果。</div><div style={{display:'grid',gap:10}}><label style={{fontSize:13,color:'#555'}}>选择 DoH 地址：</label><select id='doh' style={{background:'#fff',border:'1px solid #e8e8e8',borderRadius:12,padding:'12px 14px'}}><option value='current'>https://当前站点（/dns-query 或 /&lt;token&gt;）</option><option value='https://cloudflare-dns.com/dns-query'>Cloudflare — cloudflare-dns.com</option><option value='https://dns.google/dns-query'>Google — dns.google</option><option value='custom'>自定义…</option></select><input id='custom' placeholder='https://example.com/dns-query' style={{display:'none',background:'#fff',border:'1px solid #e8e8e8',borderRadius:12,padding:'12px 14px'}}/></div><div style={{display:'grid',gap:10,marginTop:8}}><label style={{fontSize:13,color:'#555'}}>待解析域名：</label><div style={{display:'grid',gridTemplateColumns:'1fr auto auto',gap:10}}><input id='name' placeholder='example.com' defaultValue='example.com' style={{background:'#fff',border:'1px solid #e8e8e8',borderRadius:12,padding:'12px 14px'}}/><select id='type' style={{background:'#fff',border:'1px solid #e8e8e8',borderRadius:12,padding:'12px 14px'}}><option value='A'>A</option><option value='AAAA'>AAAA</option><option value='CNAME'>CNAME</option><option value='NS'>NS</option><option value='MX'>MX</option><option value='TXT'>TXT</option></select><button id='btn' style={{background:'#ff6a3d',color:'#fff',border:0,borderRadius:12,padding:'12px 16px',fontWeight:800,cursor:'pointer'}}>解析</button></div></div><div style={{display:'grid',gridTemplateColumns:'1fr auto auto',gap:10,marginTop:12,marginBottom:12}}><div></div><button id='btnJson' style={{background:'#eef3ff',color:'#1a2b6c',border:'1px solid #d9e4ff',borderRadius:12,padding:'12px 16px',fontWeight:800,cursor:'pointer'}}>Get JSON</button><button id='btnClear' style={{background:'#fff1ef',color:'#9a3a24',border:'1px solid #ffd1c8',borderRadius:12,padding:'12px 16px',fontWeight:800,cursor:'pointer'}}>清除</button></div><div style={{display:'grid',gap:12,gridTemplateColumns:'1fr'}}><div style={{background:'#fff',border:'1px solid #eee',borderRadius:14,padding:12}}><div style={{color:'#555',marginBottom:6}}>简表</div><div id='table'>—</div></div><div style={{background:'#fff',border:'1px solid #eee',borderRadius:14,padding:12}}><div style={{color:'#555',marginBottom:6}}>原始 JSON</div><pre id='raw'>{`{}`}</pre></div></div></div></div><script dangerouslySetInnerHTML={{__html:`const $=s=>document.querySelector(s);const dohS=$('#doh'),customI=$('#custom'),nameI=$('#name'),typeS=$('#type');const raw=$('#raw'),table=$('#table');dohS.addEventListener('change',()=>{customI.style.display=dohS.value==='custom'?'block':'none'});function dohEndpoint(){if(dohS.value==='current')return location.origin+'/dns-query';if(dohS.value==='custom')return customI.value.trim();return dohS.value}function rrToString(a){return a.data||a.ip||a.txt||a.target||a.value||(typeof a==='string'?a:JSON.stringify(a))}function renderTable(json){const A=json.Answer||[];if(!A.length){table.innerHTML='—';return}const rows=A.map(a=>\\`<tr><td>\\${a.type||''}</td><td>\\${a.name||''}</td><td>\\${rrToString(a)}</td><td>\\${a.TTL||a.ttl||''}</td></tr>\\`).join('');table.innerHTML=\\`<table style="width:100%;border-collapse:collapse"><thead><tr><th>类型</th><th>名称</th><th>值</th><th>TTL</th></tr></thead><tbody>\\${rows}</tbody></table>\\`; } async function query(doJson=false){const name=nameI.value.trim();if(!name)return alert('请输入域名');const doh=dohEndpoint();if(!doh)return alert('请填写自定义 DoH 地址');const base=doJson?(doh.replace('/dns-query','/resolve')):'/resolve';const u=new URL(base,location.origin);u.searchParams.set('name',name);u.searchParams.set('type',typeS.value);if(!doJson)u.searchParams.set('doh',doh);const r=await fetch(u.toString());const j=await r.json();raw.textContent=JSON.stringify(j,null,2);renderTable(j);}document.getElementById('btn').addEventListener('click',()=>query(false));document.getElementById('btnJson').addEventListener('click',()=>query(true));document.getElementById('btnClear').addEventListener('click',()=>{raw.textContent='{ }';table.innerHTML='—';});`}} /></body></html>)}